(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{225:function(e,a,t){"use strict";t.r(a);var s=t(0),n=Object(s.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"content"},[t("h2",{attrs:{id:"简单思路是把nginx直接当作文件服务器来用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简单思路是把nginx直接当作文件服务器来用","aria-hidden":"true"}},[e._v("#")]),e._v(" 简单思路是把nginx直接当作文件服务器来用")]),e._v(" "),t("ol",[t("li",[e._v("在本地打包出前端工程的静态文件")])]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[e._v("    yarn build\n")])])]),t("p",[e._v("在根目录下将生成 dist 文件夹")]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[e._v("编写 Dockerfile 使用nginx 构建镜像，把静态文件拷贝到nginx的静态文件服务文件夹里")])]),e._v(" "),t("ul",[t("li",[e._v("Dockerfile 示例：")])]),e._v(" "),t("div",{staticClass:"language-Dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    # 设置基础镜像\n    FROM nginx\n    # 将dist文件中的内容复制到 /usr/share/nginx/html/ 这个目录下面\n    COPY dist/  /usr/share/nginx/html/\n")])])]),t("ul",[t("li",[e._v("构建镜像")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    # -t 是给镜像取名。\n    # 最后有一个点 “.”，表示使用当前路径下的 dockerfile 文件，也可以指定使用其它路径的。\n    docker build -t demo .\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("启动容器即可，按照暴露出的端口访问")])]),e._v(" "),t("ul",[t("li",[e._v("启动容器")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    # -p ：配置端口映射，格式是：外部访问端口：容器内端口\n    # -d ：后台运行  \n    # --name : 给容器取名\n    # 最后有 2 个 名字,前面一个是给容器取的名字，后面一个是使用的镜像的名字\n    docker run -p 3000:80 -d --name gentle-vue gentle-vue\n")])])]),t("p",[e._v("可通过 "),t("code",[e._v("docker images")]),e._v(" 查看所有镜像，通过 "),t("code",[e._v("docker ps")]),e._v(" 查看正在运行的容器"),t("br"),e._v("\n通过 ip:3000 来访问")]),e._v(" "),t("h2",{attrs:{id:"改进方向是："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改进方向是：","aria-hidden":"true"}},[e._v("#")]),e._v(" 改进方向是：")]),e._v(" "),t("ol",[t("li",[e._v("自动打包静态文件，工程依赖不进入容器")]),e._v(" "),t("li",[e._v("推送代码自动部署")])])])}],!1,null,null,null);a.default=n.exports}}]);